<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Tenant Management</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="splashScreen">
        <div class="splash-content">
            <div class="logo-container">
                <div class="logo-shape">
                    <svg viewBox="0 0 100 100" class="building-icon">
                        <polygon points="15,45 50,15 85,45" fill="#ffffff"/>
                        <rect x="25" y="45" width="50" height="40" fill="#ffffff"/>
                        <rect x="42.5" y="65" width="15" height="20" fill="#3498db"/>
                    </svg>
                </div>
            </div>
            <div class="welcome-text">
                <h1 class="line-1">Welcome to</h1>
                <h2 class="line-2">IBA Real Estate</h2>
            </div>
        </div>
    </div>

    <div id="sideNav" class="sidenav">
        <a href="javascript:void(0)" class="close-btn" id="closeBtn">&times;</a>
        <h2>Menu</h2>
        <a href="#" class="nav-link active" id="dashboardLink">üìä Dashboard</a>
        <a href="#" class="nav-link" id="dataEntryLink">üìù Data Entry</a>
        <a href="#" class="nav-link" id="searchLink">üîç Search</a>
        <hr>
        <div id="auth-container">
             <h3>Admin Login</h3>
            <form id="loginForm">
                <input type="email" id="loginEmail" placeholder="Email" required>
                <input type="password" id="loginPassword" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>
            <div id="userInfo" class="hidden">
                <p id="authStatus">You are not logged in.</p>
                <button id="logoutBtn">Logout</button>
            </div>
        </div>
    </div>

    <div id="mainContent">
        <div id="dashboardView">
             <header>
                <span id="openBtn1" class="open-btn">&#9776;</span>
                <h1>Dashboard</h1>
            </header>
            <div class="container">
                <div id="statCards" class="stat-cards-container">
                    <div class="card">
                        <div class="card-icon properties"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3zm5 15h-2v-6H9v6H7v-7.81l5-4.5 5 4.5V18z"/><path d="M7 10.19V18h2v-6h6v6h2v-7.81l-5-4.5z" opacity=".3"/></svg></div>
                        <div class="card-info"><div class="card-title">Total Properties</div><div class="card-value" id="totalProperties">0</div></div>
                    </div>
                    <div class="card">
                         <div class="card-icon tenants"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg></div>
                        <div class="card-info"><div class="card-title">Total Tenants</div><div class="card-value" id="totalTenants">0</div></div>
                    </div>
                    <div class="card">
                         <div class="card-icon rent"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c2.11-.46 3.5-1.77 3.5-3.79 0-2.03-1.16-3.12-4.2-3.97z"/></svg></div>
                        <div class="card-info"><div class="card-title">Total Monthly Rent</div><div class="card-value" id="totalMonthlyRent">QAR 0.00</div></div>
                    </div>
                </div>
                <div class="chart-container">
                    <h3>Rental Income by Property</h3>
                    <canvas id="rentChart"></canvas>
                </div>
            </div>
        </div>

        <div id="dataEntryView" class="hidden">
            <header><span id="openBtn2" class="open-btn">&#9776;</span><h1>Data Entry</h1></header>
            <div class="container">
                <div class="form-container">
                    <fieldset id="form-fieldset" disabled>
                        <form id="tenantForm">
                            <input type="hidden" id="tenantId">
                            <div class="form-group-full"><label>Property</label><div class="property-selection"><select id="propertySelect"><option value="" disabled selected>-- Select Existing Property --</option></select><input type="text" id="newProperty" placeholder="...or Add New Property Name"></div></div>
                            <div class="form-group"><label for="villa">Villa / Unit No.</label><input type="text" id="villa" required></div>
                            <div class="form-group"><label for="monthlyRent">Monthly Rent</label><input type="number" id="monthlyRent" required></div>
                            <div class="form-group"><label for="tenantName">Tenant Name</label><input type="text" id="tenantName" required></div>
                            <div class="form-group"><label for="email">Email</label><input type="email" id="email"></div>
                            <div class="form-group"><label for="contactNo">Contact No.</label><input type="tel" id="contactNo" placeholder="55123456"></div>
                            <div class="form-group"><label for="startDate">Start Date</label><input type="date" id="startDate" required></div>
                            <div class="form-group"><label for="endDate">End Date</label><input type="date" id="endDate" required></div>
                            <div class="form-group-full"><label for="notes">Notes</label><textarea id="notes" placeholder="Any additional notes..."></textarea></div>
                            <div class="form-buttons">
                                <button type="submit" id="submitBtn">Add Villa Record</button>
                                <button type="button" id="clearFormBtn">Clear</button>
                                <button type="button" id="cancelBtn" class="hidden">Cancel</button>
                            </div>
                        </form>
                    </fieldset>
                </div>
                <div class="table-container">
                    <h2>Recent Entries</h2>
                    <table id="tenantTable">
                        <thead><tr><th colspan="9">PROPERTY ENTERED</th></tr></thead>
                        <tbody id="tenantList"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="searchView" class="hidden">
             <header><span id="openBtn3" class="open-btn">&#9776;</span><h1>Search Records</h1></header>
            <div class="container">
                <div class="search-container">
                    <form id="searchForm">
                        <input type="text" id="searchInput" placeholder="Search by Tenant, Villa, Notes, etc..." autocomplete="off">
                        <button type="submit">Search</button>
                        <button type="button" id="clearSearchBtn">Clear</button>
                        <button type="button" id="printReportBtn" class="print-btn">Print Report</button>
                    </form>
                    <div id="customSuggestions" class="suggestions-container"></div>
                </div>
                <div id="printArea" class="table-container">
                    <table id="searchResultTable">
                        <thead><tr><th colspan="9">PROPERTY RESULTS</th></tr></thead>
                        <tbody id="searchResultList"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <nav id="bottomNav" class="bottom-nav">
        <a href="#" id="bottomDashboardLink" class="bottom-nav-link active">
            <span class="icon">üìä</span><span class="label">Dashboard</span>
        </a>
        <a href="#" id="bottomDataEntryLink" class="bottom-nav-link">
            <span class="icon">üìù</span><span class="label">Data Entry</span>
        </a>
        <a href="#" id="bottomSearchLink" class="bottom-nav-link">
            <span class="icon">üîç</span><span class="label">Search</span>
        </a>
    </nav>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>